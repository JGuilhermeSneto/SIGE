{% extends 'core/base.html' %}
{% load static %}

{% block title %}
    {% if turma %}
        Editar Turma
    {% else %}
        Cadastro de Turma
    {% endif %}
{% endblock %}

{% block header_title %}
    {% if turma %}
        Editar Turma
    {% else %}
        Cadastro de Turma
    {% endif %}
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/cadastros.css' %}">
{% endblock %}

{% block content %}

<main class="conteudo-principal">

    <!-- CABEÇALHO -->
    <div class="header-docentes">

        <a href="{% url 'listar_turmas' %}">
            <button class="btn-voltar">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </a>

        <h1 class="titulo-pagina">
            {% if turma %}
                Editar Turma
            {% else %}
                Cadastro de Turma
            {% endif %}
        </h1>

    </div>

    <!-- CARD -->
    <div class="card-tabela">

        {% if erro %}
            <p style="color:red; margin-bottom:15px;">{{ erro }}</p>
        {% endif %}

        <form method="post" class="form-cadastro">
            {% csrf_token %}

            <!-- Nome -->
            <div class="form-group">
                <label for="nome">Nome da Turma</label>
                <input
                    type="text"
                    id="nome"
                    name="nome"
                    required
                    value="{{ turma.nome|default:'' }}"
                >
            </div>

            <!-- Turno -->
            <div class="form-group">
                <label for="turno">Turno</label>
                <select id="turno" name="turno" required>
                    <option value="">Selecione...</option>
                    <option value="manha" {% if turma.turno == "manha" %}selected{% endif %}>Manhã</option>
                    <option value="tarde" {% if turma.turno == "tarde" %}selected{% endif %}>Tarde</option>
                    <option value="noite" {% if turma.turno == "noite" %}selected{% endif %}>Noite</option>
                </select>
            </div>

            <!-- Ano letivo -->
            <div class="form-group">
                <label for="ano">Ano Letivo</label>

                <input
                    type="number"
                    id="ano"
                    name="ano"
                    list="lista-anos"
                    required
                    min="2010"
                    max="{{ anos|last }}"
                    placeholder="Ex: 2025"
                    value="{{ turma.ano|default:'' }}"
                >

                <datalist id="lista-anos">
                    {% for ano in anos %}
                        <option value="{{ ano }}"></option>
                    {% endfor %}
                </datalist>
            </div>

            <!-- Botão -->
            <div class="form-actions">
                <button type="submit" class="btn-adicionar">
                    {% if turma %}
                        Salvar Alterações
                    {% else %}
                        Cadastrar Turma
                    {% endif %}
                </button>
            </div>

        </form>

    </div>

</main>

{% endblock %}
