{% extends 'core/base.html' %}
{% load static %}

{% block title %}Turmas{% endblock %}
{% block header_title %}Turmas{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/lista_docentes.css' %}">
{% endblock %}

{% block content %}

<main class="conteudo-principal">

    <!-- CABEÇALHO -->
    <div class="header-docentes">

        <a href="{% url 'painel_super' %}">
            <button class="btn-voltar">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </a>

        <h1 class="titulo-pagina">Turmas</h1>

        <a href="{% url 'cadastrar_turma' %}">
            <button class="btn-adicionar">Adicionar Turma</button>
        </a>

    </div>

    <!-- CARD PRINCIPAL -->
    <div class="card-tabela">

        <!-- BUSCA + FILTRO (LADO A LADO) -->
<div class="barra-busca-linha">

    <!-- BUSCA -->
    <div class="barra-busca">
        <form method="get"
              action="{% url 'listar_turmas' %}"
              style="width:100%; display:flex;">
            <input type="text"
                   name="q"
                   placeholder="Buscar turma..."
                   value="{{ query|default:'' }}">
        </form>
        <i class="fa-solid fa-magnifying-glass"></i>
    </div>

    <!-- FILTRO ANO LETIVO -->
    <form method="get" class="filtro-ano">
        <label>Ano letivo</label>
        <select name="ano" onchange="this.form.submit()">
            {% for ano in anos_disponiveis %}
                <option value="{{ ano }}" {% if ano == ano_filtro %}selected{% endif %}>
                    {{ ano }}
                </option>
            {% endfor %}
        </select>

        {% if query %}
            <input type="hidden" name="q" value="{{ query }}">
        {% endif %}
    </form>

</div>


        <!-- TABELA -->
        <div class="container-tabela">

            <table class="tabela-docentes">
                <thead>
                    <tr>
                        <th class="coluna-nome">Nome</th>
                        <th class="coluna-email">Ano Letivo</th>
                        <th class="coluna-email">Turno</th>
                        <th class="coluna-acoes">Ações</th>
                    </tr>
                </thead>

                <tbody>
                    {% for turma in turmas %}
                    <tr>
                        <td>{{ turma.nome }}</td>
                        <td>{{ turma.ano }}</td>
                        <td>{{ turma.get_turno_display }}</td>

                        <td class="coluna-acoes">

                            <a href="{% url 'listar_disciplinas_turma' turma.id %}"
                               class="acao-btn"
                               title="Ver Disciplinas">
                                <i class="fa-solid fa-book"></i>
                            </a>

                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" style="text-align:center; padding:15px;">
                            Nenhuma turma encontrada.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>

        </div>

    </div>

</main>

{% endblock %}


