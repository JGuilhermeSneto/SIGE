{% extends 'core/base.html' %}
{% load static %}

{% block title %}Grade Horária - {{ turma.nome }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/grade.css' %}">
{% endblock %}

{% block content %}

<main class="conteudo-principal">

    <!-- CABEÇALHO -->
    <div class="header-docentes">

        <a href="{% url 'listar_disciplinas_turma' turma.id %}">
            <button class="btn-voltar">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </a>

        <h1 class="titulo-pagina">
            Grade Horária
        </h1>

    </div>

    <!-- CARD -->
    <div class="card-tabela">

        <p style="text-align:center; margin-bottom:20px; color:#666;">
            {{ turma.nome }} — {{ turma.get_turno_display }}
        </p>

        <form method="post">
            {% csrf_token %}

            <div class="container-tabela">

                <table class="grade-table">
                    <thead>
                        <tr>
                            <th>Horário</th>
                            {% for nome in nomes_dias %}
                                <th>{{ nome }}</th>
                            {% endfor %}
                        </tr>
                    </thead>

                    <tbody>
                        {% for row in rows %}
                        <tr>
                            <td class="horario-col">{{ row.horario }}</td>

                            {% for col in row.cols %}
                            <td>
                                <select name="{{ col.dia }}_{{ row.index }}">
                                    <option value="">-- Vazio --</option>

                                    {% for d in col.disciplinas %}
                                        <option value="{{ d.nome }}"
                                            {% if col.valor == d.nome %}selected{% endif %}>
                                            {{ d.nome }} – {{ d.professor.nome_completo }}
                                        </option>
                                    {% endfor %}
                                </select>
                            </td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

            </div>

            <div style="display:flex; justify-content:flex-end; margin-top:20px;">
                <button type="submit" class="btn-adicionar">
                    Salvar Grade
                </button>
            </div>

        </form>

    </div>

</main>

{% endblock %}
